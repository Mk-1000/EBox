:root{--bg:#0b0f14;--muted:#111827;--card:#0c1218;--text:#e5fbfb;--sub:#a6b3bd;--accent:#2bd4c2;--green:#21cfa3;--red:#f27f7f;--yellow:#f2d56b}
/* Light theme overrides */
[data-theme=light]{--bg:#f7fafc;--muted:#e5e7eb;--card:#ffffff;--text:#0f172a;--sub:#475569;--accent:#0ea5e9;--green:#10b981;--red:#ef4444;--yellow:#eab308}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;background:linear-gradient(180deg,#06080c,#0b0f14);color:var(--text)}
body[data-theme=light]{background:linear-gradient(180deg,#eef2f7,#f7fafc)}
.app-header{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;position:sticky;top:0;background:rgba(11,16,32,.6);backdrop-filter:blur(8px);border-bottom:1px solid #1f2937;flex-wrap:nowrap}
body[data-theme=light] .app-header{background:rgba(255,255,255,.7);border-bottom-color:#e5e7eb}
.app-header h1{margin:0;font-size:20px;color:var(--accent)}
.app-header h1.brand{display:flex;align-items:center;gap:8px;color:inherit;flex:0 0 auto}
.app-header h1.brand img{height:32px;display:block;width:auto}
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
.user-area{display:flex;gap:8px;align-items:center;flex-wrap:nowrap;flex:1 1 auto;justify-content:flex-end;min-width:0;position:relative}
.user-chip{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:9999px;background:rgba(43,212,194,.12);color:var(--accent);border:1px solid rgba(43,212,194,.35);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:0 0 auto;order:1}
.btn.icon{width:36px;height:36px;display:inline-flex;align-items:center;justify-content:center;padding:0;order:2}
.menu{position:absolute;right:0;top:calc(100% + 8px);background:var(--card);border:1px solid #22314a;border-radius:10px;box-shadow:0 10px 24px rgba(0,0,0,.35);padding:8px;min-width:220px;z-index:20;display:none}
body[data-theme=light] .menu{border-color:#e5e7eb;box-shadow:0 10px 24px rgba(2,6,23,.08)}
.menu.open{display:block}
.menu .menu-section{padding:6px 6px 10px 6px;border-bottom:1px solid #1b2733;margin-bottom:8px}
.menu .menu-label{display:block;color:var(--sub);font-size:12px;margin-bottom:6px}
.menu .menu-item{display:block;width:100%;text-align:left;background:transparent;border:0;color:var(--text);padding:8px 10px;border-radius:8px;cursor:pointer}
.menu .menu-item:hover{background:rgba(255,255,255,.05)}
.menu .menu-item.danger{color:var(--red)}
html[dir=rtl] .menu{left:0;right:auto}
.user-area select,.user-area .btn{flex:0 0 auto}
.card{background:rgba(12,18,24,.8);border:1px solid #1b2733;border-radius:12px;padding:16px;box-shadow:0 6px 18px rgba(0,0,0,.35)}
body[data-theme=light] .card{background:#ffffff;border-color:#e5e7eb;box-shadow:0 6px 18px rgba(2,6,23,.08)}
main{max-width:1100px;margin:20px auto;padding:0 16px}
#authSection{max-width:420px;margin:40px auto}
input,select{width:100%;padding:10px 12px;margin:8px 0;border-radius:8px;border:1px solid #263445;background:#0b1220;color:var(--text)}
body[data-theme=light] input,body[data-theme=light] select{border-color:#cbd5e1;background:#ffffff;color:#0f172a}
.actions{display:flex;gap:8px}
.btn{padding:10px 14px;border-radius:8px;border:1px solid #2b3b52;background:#0b1220;color:var(--text);cursor:pointer}
body[data-theme=light] .btn{background:#ffffff;border-color:#cbd5e1;color:#0f172a}
.btn.primary{background:linear-gradient(180deg,#2bd4c2,#1aa397);border:0}
.btn.secondary{background:#111827;border-color:#374151}
body[data-theme=light] .btn.secondary{background:#f3f4f6;border-color:#e5e7eb}
.error{color:#f87171;margin-top:8px;min-height:20px}
.toolbar{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
.toolbar .move-mobile{display:none}
.toolbar #newTaskForm{display:flex;gap:8px;align-items:center;flex:1 1 auto;flex-wrap:wrap}
.toolbar #newTaskForm input{order:1;flex:1 1 240px;width:auto;min-width:160px}
.toolbar #newTaskForm select{order:2;flex:0 0 auto;width:auto}
.toolbar #newTaskForm .btn{order:3;flex:0 0 auto}
.stats{margin-left:0;color:var(--sub);flex:1 1 100%}
/* Eisenhower Box Dashboard */
.eisenhower-grid{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr;gap:16px;margin-top:16px;height:calc(100vh - 200px);min-height:500px}
.eisenhower-quadrant{background:var(--card);border:1px solid #1b2733;border-radius:12px;padding:20px;display:flex;flex-direction:column;transition:transform .08s ease,box-shadow .12s ease,border-color .12s ease}
body[data-theme=light] .eisenhower-quadrant{border-color:#e5e7eb}
.eisenhower-quadrant h3{margin:0 0 8px 0;font-size:18px;color:var(--text)}
.quadrant-description{margin:0 0 16px 0;font-size:14px;color:var(--sub)}
.projects-container{flex:1;overflow-y:auto;min-height:200px}
.projects-container:empty::after{content:"Drop projects here";color:var(--sub);font-style:italic;display:block;text-align:center;padding:20px}
.project-card{background:rgba(43,212,194,.1);border:1px solid rgba(43,212,194,.3);border-radius:8px;padding:12px;margin-bottom:8px;transition:transform .08s ease,box-shadow .12s ease,border-color .12s ease;cursor:pointer;position:relative;min-height:140px;display:flex;flex-direction:column;max-width:100%}
.project-card:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(43,212,194,.2)}
.project-card.dragging{opacity:0.5;transform:rotate(5deg)}
.project-card h4{margin:0 0 4px 0;font-size:14px;color:var(--text);line-height:1.3}
.project-card p{margin:0;font-size:12px;color:var(--sub);line-height:1.4;flex:1;overflow:hidden;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical}
.project-progress{margin-top:auto;padding-top:8px}
.progress-bar{background:rgba(255,255,255,.1);border-radius:6px;height:12px;overflow:hidden;position:relative;width:100%}
.progress-fill{background:linear-gradient(90deg,var(--accent),var(--green));height:100%;transition:width .3s ease;border-radius:6px}
.progress-text{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:11px;color:var(--text);font-weight:600;text-shadow:0 1px 2px rgba(0,0,0,0.3)}
.eisenhower-quadrant[data-quadrant="urgent-important"]{border-left:4px solid var(--red)}
.eisenhower-quadrant[data-quadrant="not-urgent-important"]{border-left:4px solid var(--green)}
.eisenhower-quadrant[data-quadrant="urgent-not-important"]{border-left:4px solid var(--yellow)}
.eisenhower-quadrant[data-quadrant="not-urgent-not-important"]{border-left:4px solid var(--sub)}
.eisenhower-quadrant.dragover{background:rgba(43,212,194,.1);border-color:var(--accent);transform:scale(1.02)}
.project-card.dragging{opacity:0.5;transform:rotate(5deg) scale(1.05)}
.project-card:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(0,0,0,.35);border-color:#2b4766}
body[data-theme=light] .project-card:hover{box-shadow:0 8px 20px rgba(2,6,23,.08);border-color:#cbd5e1}
.project-card h3{margin:0 0 8px 0;color:var(--text);font-size:18px;font-weight:600}
.project-card p{margin:0 0 16px 0;color:var(--sub);font-size:14px;line-height:1.4}
.project-progress{margin-bottom:16px}
.progress-bar{width:100%;height:8px;background:#1b2733;border-radius:4px;overflow:hidden;position:relative}
body[data-theme=light] .progress-bar{background:#e5e7eb}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--accent),var(--green));transition:width .3s ease}
.progress-text{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:12px;font-weight:600;color:var(--text)}
.project-actions{display:flex;gap:8px;justify-content:flex-end}
.project-actions .btn{padding:6px 12px;font-size:12px}

/* Project Page */
.project-stats{display:flex;gap:24px;align-items:center;flex-wrap:wrap;margin-bottom:16px}
.stat{display:flex;flex-direction:column;gap:4px;min-width:120px}
.stat-label{font-size:12px;color:var(--sub);text-transform:uppercase;letter-spacing:0.5px}
.stat-value{font-size:24px;font-weight:600;color:var(--text)}
.progress-bar{width:200px;height:12px;background:#1b2733;border-radius:6px;overflow:hidden;position:relative}
body[data-theme=light] .progress-bar{background:#e5e7eb}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--accent),var(--green));transition:width .3s ease}
.progress-text{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:12px;font-weight:600;color:var(--text)}

/* Task Controls */
.task-controls{display:flex;flex-direction:column;gap:16px;margin-bottom:16px}
.task-controls form{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.task-controls input,.task-controls select{flex:1;min-width:150px}
.filters{display:flex;gap:8px;flex-wrap:wrap}
.filters select{min-width:120px}

/* Kanban Board */
.kanban-board{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-top:16px}
.kanban-column{background:rgba(11,17,23,.4);border:1px dashed #274056;border-radius:12px;padding:16px;min-height:400px}
body[data-theme=light] .kanban-column{border-color:#cbd5e1;background:#f8fafc}
.kanban-column h3{margin:0 0 16px 0;color:var(--accent);font-size:16px;font-weight:600;text-align:center;padding-bottom:8px;border-bottom:1px solid #203040}
body[data-theme=light] .kanban-column h3{border-bottom-color:#e5e7eb}
.task-list{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:8px;min-height:300px}

/* Task Items */
.task{background:var(--card);border:1px solid #22314a;border-radius:12px;padding:16px;transition:transform .08s ease,box-shadow .12s ease,border-color .12s ease;cursor:move}
body[data-theme=light] .task{background:#ffffff;border-color:#e5e7eb}
.task:hover{transform:translateY(-1px);box-shadow:0 6px 14px rgba(0,0,0,.35);border-color:#2b4766}
body[data-theme=light] .task:hover{box-shadow:0 6px 14px rgba(2,6,23,.08);border-color:#cbd5e1}
.task.dragging{opacity:.5;transform:rotate(5deg)}
.kanban-column.dragover{outline:2px solid var(--accent);background:rgba(43,212,194,.1)}

.task-header{display:flex;align-items:center;gap:8px;margin-bottom:8px}
.task-title{flex:1;font-weight:600;color:var(--text);font-size:14px}
.task-priority{font-size:10px;padding:2px 6px;border-radius:4px;font-weight:600;text-transform:uppercase}
.priority-high{background:#f27f7f;color:#ffffff}
.priority-medium{background:#f2d56b;color:#000000}
.priority-low{background:#21cfa3;color:#ffffff}

.task-meta{display:flex;align-items:center;gap:8px;margin-bottom:8px;font-size:12px;color:var(--sub)}
.task-due-date{display:flex;align-items:center;gap:4px}
.task-due-date.overdue{color:var(--red)}
.task-due-date.due-soon{color:var(--yellow)}

.task-description{font-size:13px;color:var(--sub);margin-bottom:8px;line-height:1.4}

.task-subtasks{margin-top:8px}
.subtask{display:flex;align-items:center;gap:8px;padding:4px 0;font-size:12px}
.subtask input[type=checkbox]{accent-color:var(--green);transform:scale(0.9)}
.subtask.completed{opacity:0.6;text-decoration:line-through}

.task-actions{display:flex;gap:4px;margin-top:8px}
.task-actions .btn{padding:4px 8px;font-size:11px}

/* Modals */
.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);display:flex;align-items:center;justify-content:center;z-index:1000}
.modal[hidden]{display:none !important}
.modal-content{background:var(--card);border:1px solid #1b2733;border-radius:12px;padding:0;min-width:400px;max-width:90vw;max-height:90vh;overflow-y:auto}
body[data-theme=light] .modal-content{border-color:#e5e7eb}
.modal-header{display:flex;align-items:center;justify-content:space-between;padding:20px;border-bottom:1px solid #1b2733}
body[data-theme=light] .modal-header{border-bottom-color:#e5e7eb}
.modal-header h3{margin:0;color:var(--text)}
.modal form{padding:20px}
.modal form input,.modal form textarea,.modal form select{width:100%;margin-bottom:16px}
.form-row{display:flex;gap:12px}
.form-row select{flex:1}
.modal-actions{display:flex;gap:8px;justify-content:flex-end;margin-top:20px}

/* Responsive Design */
@media (max-width:768px){
  .kanban-board{grid-template-columns:1fr;gap:12px}
  .project-stats{flex-direction:column;align-items:stretch;gap:16px}
  .task-controls form{flex-direction:column;align-items:stretch}
  .filters{flex-direction:column}
  .modal-content{min-width:300px;margin:16px}
  .eisenhower-grid{grid-template-columns:1fr;gap:12px;height:auto}
  .project-card{min-height:120px;padding:10px}
  .project-card h4{font-size:13px}
  .project-card p{font-size:11px;-webkit-line-clamp:2;line-clamp:2}
  .progress-bar{height:10px}
  .progress-text{font-size:10px}
}
@media (max-width:760px){.grid{grid-template-columns:1fr}}
@media (max-width:760px){
  .app-header{padding:10px 12px}
  .app-header h1.brand img{height:36px}
  .user-area{gap:6px}
  .user-chip{flex:0 0 auto}
  .toolbar{flex-direction:column;align-items:stretch}
  .toolbar #newTaskForm{width:100%}
  .toolbar .stats{order:3;margin-left:0}
  .toolbar .move-mobile{display:block}
}
@media (max-width:480px){
  .toolbar #newTaskForm input{order:1;flex:1 1 100%;min-width:0}
  .toolbar #newTaskForm select{order:2;flex:1 1 60%}
  .toolbar #newTaskForm .btn{order:3}
}

/* Subtask styling for separate display */
.task.subtask {
  margin-left: 20px;
  border-left: 3px solid var(--accent);
  background: rgba(43, 212, 194, 0.05);
  position: relative;
}

.task.subtask::before {
  content: '';
  position: absolute;
  left: -3px;
  top: 0;
  bottom: 0;
  width: 3px;
  background: var(--accent);
  opacity: 0.6;
}

.subtask-indicator {
  color: var(--accent);
  font-weight: bold;
  margin-right: 4px;
}

.parent-task-info {
  color: var(--sub);
  font-size: 0.9em;
  font-style: italic;
}

.task.subtask .task-title {
  display: flex;
  align-items: center;
  gap: 4px;
}

.subtask-actions {
  display: flex;
  gap: 4px;
  margin-left: auto;
}

.subtask-actions .btn {
  padding: 2px 6px;
  font-size: 10px;
}

.subtask {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 0;
  border-bottom: 1px solid rgba(43, 212, 194, 0.1);
}

.subtask:last-child {
  border-bottom: none;
}

.subtask input[type=checkbox] {
  margin: 0;
  accent-color: var(--accent);
}

.subtask span {
  flex: 1;
  font-size: 13px;
}


